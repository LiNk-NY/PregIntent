---
title: "Descriptives"
author: "Marcel Ramos"
date: "January 9, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
suppressPackageStartupMessages({
    library(broom)
    library(dplyr)
    library(tidyr)
    library(readr)
})
```

## Load required packages

```{r, eval = FALSE}
library(broom)
library(dplyr)
library(tidyr)
library(readr)
```

## Load the dataset

```{r}
pregint <- read.csv("../data/pregint.csv")
```

## Filter variables

Separate variable names that should not be used:

```{r}
ignoreVars <- c("ResponseID", "StartDate", "EndDate", "Finished",
    "SC0_0", "SC0_1", "SC0_2", "rid", "gc", "term", "LocationLatitude",
    "LocationLongitude", "LocationAccuracy", "states", "region",
    grep("TEXT", names(pregint), fixed = TRUE, value = TRUE))

validVars <- !names(pregint) %in% ignoreVars
```

Read names from Excel file and filter variables that have been recoded:

```{r}
codebookCode <- read_csv("../docs/codebookCode.csv")
changedNames <- codebookCode[["dataname"]] != codebookCode[["recodeName"]]
mkRemoval <- unlist(codebookCode[changedNames, "dataname"], use.names = FALSE)
descVars <- !names(pregint) %in% c(names(pregint)[!validVars], mkRemoval)
pregintDESC <- pregint[, descVars]
pregintDESC <- pregintDESC[, !vapply(pregintDESC, function(x) all(is.na(x)), logical(1L))]
```

## Summary

```{r}
summary(pregintDESC)
```

